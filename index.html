<!DOCTYPE html>
<html>
    <script>
        /**
        * determines the choice the computer will make in RPS.
        *
        * generates a random number, and then returns one of ["rock", "paper", "scissors"]
        */
        function computerPlay() {
            // generate a random number between 0 and 2
            const computerChoice = Math.floor(Math.random() * 3);

            // determine what choice the computer "makes" based on what number is generated and return it
            return computerChoice === 0
                ? "rock"
                : computerChoice === 1
                ? "paper"
                : "scissors";
        }

        /**
        * the main game loop for my implementation of rock paper scissors
        * 
        * asks for user input and generates a computer choice 5 times, then stops.
        */
        function game() {
            let playerWins = 0;
            let computerWins = 0;

            /**
            * uses player and computer input to play a round of rock, paper, scissors.
            * 
            * compares the given choices to determine the winner, and then returns the victor (or declares a tie)
            */
            function playRound(playerSelection, computerSelection) {
                // convert inputs to lowercase to make comparison easier
                const pChoice = playerSelection.toLowerCase();
                const cChoice = computerSelection.toLowerCase();
    
                /** 
                * first, determine if there was a tie. next, see if the player won.
                * if the player didn't win, we can assume the computer secured victory.
                * now, we return the result of the round.
                */
                return (pChoice === cChoice)
                ? "The round is a tie!"
                : (
                    (pChoice === "rock" && cChoice === "scissors") ||
                    (pChoice === "scissors" && cChoice === "paper") ||
                    (pChoice === "paper" && cChoice === "rock")
                ) ? "The player wins the round!"
                : "The computer wins the round!";
            }

            // play the game 5 times
            for(let round = 0; round < 5; round++) {
                // ask the user for their choice, generate the computer's
                let playerOption = prompt("Rock, paper, or scissors?");
                let computerOption = computerPlay();

                // determine the outcome of the round
                let victor = playRound(playerOption, computerOption);

                // determine which score to increase
                if (victor.match(/player/i)) {
                    playerWins++;
                } else if(victor.match(/computer/i)) {
                    computerWins++;
                }

                // log the current scores and the result of the round
                console.log(`${victor}\nYou: ${playerWins} | Computer: ${computerWins}`);
            }

            // log the result of the game -- declaring a tie if the number of rounds won is equal.
            console.log(playerWins === computerWins ? "The game was a tie!" : `The winner is... the ${playerWins > computerWins ? 'player' : 'computer'}!`);
        }
    </script>
</html>